<html class="has-navbar-fixed-top" lang="en"><head><title>Elmish · Elmish</title><meta http-equiv="content-type" content="text/html; charset=UTF-8" charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="shortcut icon" href="/elmish/img/logo.png"/><link rel="stylesheet" type="text/css" href="/elmish/style.css"/><script src="https://unpkg.com/scroll-into-view-if-needed@2.2.28/umd/scroll-into-view-if-needed.min.js"></script></head><body class="has-footer"><nav class="navbar is-fixed-top is-spaced"><div class="container"><div class="navbar-brand"><a class="navbar-item title is-4" href="https://elmish.github.io/elmish/">Elmish</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/elmish/docs/basics.html">Docs</a><div class="navbar-item navbar-burger-dots is-hidden-tablet"><svg height="4" stroke="none" viewBox="0 0 22 4" width="22"><circle cx="2" cy="2" r="2"></circle><circle cx="2" cy="2" r="2" transform="translate(9,0)"></circle><circle cx="2" cy="2" r="2" transform="translate(18,0)"></circle></svg></div></div><div class="navbar-end is-hidden-mobile"><a class="navbar-item" href="https://github.com/elmish/elmish"><span class="icon"><i class=" fab fa-2x fa-github fa-lg"></i></span></a></div></div><div class="nacara-navbar-menu"><a class="nacara-navbar-menu-item" href="https://github.com/elmish/elmish">GitHub</a></div></div></nav><div class="grey-overlay"></div><div class="nacara-content"><div class="container"><div class="columns"><div class="column is-10-desktop is-8-widescreen is-offset-1-desktop is-offset-2-widescreen"><section class="section"><div class="content"><header class="page-header"><div class="columns is-vcentered"><div class="column"></div><div class="column is-narrow"><a class="button is-hidden-touch is-ghost" target="_blank" href="https://github.com/elmish/elmish/edit/v4.x/docs/index.md">Edit</a></div></div><h1 class="title is-1">Elmish</h1></header><div><style class=grvsc-styles>.grvsc-container{overflow:auto;position:relative;-webkit-overflow-scrolling:touch;padding-top:1rem;padding-top:var(--grvsc-padding-top,var(--grvsc-padding-v,1rem));padding-bottom:1rem;padding-bottom:var(--grvsc-padding-bottom,var(--grvsc-padding-v,1rem));border-radius:8px;border-radius:var(--grvsc-border-radius,8px);font-feature-settings:normal;line-height:1.4}.grvsc-code{display:table}.grvsc-line{display:table-row;box-sizing:border-box;width:100%;position:relative}.grvsc-line>*{position:relative}.grvsc-gutter-pad{display:table-cell;padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem))/ 2)}.grvsc-gutter{display:table-cell;-webkit-user-select:none;-moz-user-select:none;user-select:none}.grvsc-gutter::before{content:attr(data-content)}.grvsc-source{display:table-cell;padding-left:1.5rem;padding-left:var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem));padding-right:1.5rem;padding-right:var(--grvsc-padding-right,var(--grvsc-padding-h,1.5rem))}.grvsc-source:empty::after{content:' ';-webkit-user-select:none;-moz-user-select:none;user-select:none}.grvsc-gutter+.grvsc-source{padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem))/ 2)}.grvsc-has-line-highlighting>.grvsc-code>.grvsc-line::before{content:' ';position:absolute;width:100%}.grvsc-line-diff-add::before{background-color:var(--grvsc-line-diff-add-background-color,rgba(0,255,60,.2))}.grvsc-line-diff-del::before{background-color:var(--grvsc-line-diff-del-background-color,rgba(255,0,20,.2))}.grvsc-line-number{padding:0 2px;text-align:right;opacity:.7}.atom-one-light{background-color:#fafafa;color:#383a42}.atom-one-light .mtk1{color:#383a42}.atom-one-light .mtk14{color:#a626a4}.atom-one-light .mtk9{color:#4078f2}.atom-one-light .grvsc-line-highlighted::before{background-color:var(--grvsc-line-highlighted-background-color,rgba(0,0,0,.05));box-shadow:inset var(--grvsc-line-highlighted-border-width,4px) 0 0 0 var(--grvsc-line-highlighted-border-color,rgba(0,0,0,.2))}</style><blockquote><p><code>-ish</code><br>a suffix used to convey the sense of “having some characteristics of”</blockquote><p>Elmish implements core abstractions that can be used to build F# applications following the <a href=https://guide.elm-lang.org/architecture/>“model view update”</a> style of architecture, as made famous by Elm.<p>The goal of the architecture is to provide a solid UI-independent core to build the rest of the functionality around. Elm architecture operates using the following concepts, as they translate to Elmish:<ul><li><strong>Model</strong><br>This is a snapshot of your application's state, defined as an immutable data structure.</ul><div><ul><li><strong>Message</strong><br>This an event representing a change (delta) in the state of your application, defined as a discriminated union.</ul><div><ul><li><strong>Command</strong><br>This is a carrier of instructions, that when evaluated may produce one or more messages.</ul><div><ul><li><strong>Init</strong><br>This is a pure function that produces the inital state of your application and, optionally, commands to process.</ul><div><ul><li><strong>Update</strong><br>This is a pure function that produces a new state of your application given the previous state and, optionally, new commands to process.</ul><div><ul><li><strong>View</strong><br>This is a pure function that produces a new UI layout/content given the current state, defined as an F# function that uses a renderer (such as React) to declaratively build a UI.</ul><div><ul><li><strong>Program</strong><br>This is an opaque data structure that combines all of the above plus a <code>setState</code> function to produce a view from the model. See the <a href=program.html><code>Program</code></a> module for more details.</ul><h3 id=installation>Installation<a href=#installation aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h3><pre class="atom-one-light grvsc-container"data-index=0 data-language=sh><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>dotnet add package Fable.Elmish</span></span></span></code></pre><h2 id=concepts>Concepts<a href=#concepts aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h2><h3 id=dispatch-loop>Dispatch loop<a href=#dispatch-loop aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h3><p><img alt=flow src=static/img/flow.svg><p>Once started, Program runs a dispatch loop, producing a new Model given the current state and an input Message.<p>See the <a href=docs/basics.html>basics example</a> for details.<h3 id=parent-child-composition-and-user-interaction>Parent-child composition and user interaction<a href=#parent-child-composition-and-user-interaction aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h3><p>Parent-child hierarchy is made explicit by wrapping model and message types of the child with those of the parent.<p>Following diagrams show interactions between components in case of a user interacting with an example web app. Note that Elmish doesn't depend on any specific UI such as HTML rendering (it actually does not require any UI at all), and HTML is used just for explanation purposes.<p>First the UI is initialised:<p><img alt="parent-child composition: UML diagram of UI initialisation"src=static/img/parent-child-1-ui-init.svg><ol><li><code>program</code> requests the initial model from the parent, top-level component (<code>Main</code>)<li>Parent component requests the initial model from its child subcomponent (<code>Widget</code>)<li><code>Widget.initialModel</code> returns its initial model to the parent<li><code>Main.initialModel</code> wraps child's model and returns the top-level initial model to the program<li>Program sends the model to the parent's <code>Main.view</code><li>Parent unwraps the child's component model from its model and sends it to child's <code>Widget.view</code><li><code>Widget.view</code> returns a rendered <code>HTML</code> page<li><code>Main.view</code> embeds child's <code>HTML</code> page in its <code>HTML</code> page<li>The resulting <code>HTML</code> page is send to the user</ol><p>Then the user interacts with the browser:<p><img alt="parent-child composition: UML diagram of user interacting with the browser"src=static/img/parent-child-2-user-interaction.svg><ol><li>User clicks on the increase button<li><code>Widget.view</code> dispatches an <code>Increase</code> message<li><code>Main.view</code> has augemented the <code>dispatch</code> so the message becomes <code>WidgetMsg Increase</code> as it is sent along to <code>program</code><li><code>program</code> calls <code>Main.update</code> with this message and <code>mainModel</code><li>As the message was tagged with <code>WidgetMsg</code>, <code>Main.update</code> delegates the update to <code>Widget.update</code>, sending along the way the <code>widgetModel</code> part of <code>mainModel</code><li><code>Widget.update</code> modifies the model according to the given message, in this case <code>Increase</code>, and returns the modified <code>widgetModel</code> plus a command<li><code>Main.update</code> returns the updated <code>mainModel</code> to <code>program</code><li><code>program</code> then renders the view again passing the updated <code>mainModel</code></ol><p>See the <a href=docs/parent-child.html>example</a> for details.<h3 id=tasks-and-side-effects>Tasks and side-effects<a href=#tasks-and-side-effects aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h3><p>Tasks such as reading a database or making a Web API call are performed using <code>async</code> and <code>promise</code> blocks or just plain functions. These operations may return immediately but complete (or fail) at some later time. To feed the results back into the dispatch loop, instead of executing the operations directly, we instruct Elmish to do it for us by wrapping the instruction in a command.<h3 id=commands>Commands<a href=#commands aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h3><p>Commands are carriers of instructions, which you issue from the <code>init</code> and <code>update</code> functions. Once evaluated, a command may produce one or more new messages, mapping success or failure as instructed ahead of time. As with any message dispatch, in the case of Parent-Child composition, child commands need to be mapped to the parent's type:<p><img alt=cmd src=static/img/commands.svg><ol><li><code>Program</code> calls the <code>Main.update</code> with a message<li><code>Main.update</code> does its own update and/or delegates to <code>Child.update</code><li><code>Child.update</code> does its own update and/or delegates to <code>GrandChild.update</code><li><code>GrandChild.update</code> returns with its model and <code>Cmd</code> (of GrandChild message type)<li><code>Child.update</code> processes GrandChild's model and maps its <code>Cmd</code> into <code>Cmd</code> of Child's message type and batches it with its own <code>Cmd</code>, if any<li><code>Main.update</code> processes Child's model and maps its <code>Cmd</code> into <code>Cmd</code> of Main's message type and batches it with its own <code>Cmd</code>, if any</ol><p>Here we collect commands from three different levels. At the end we send all these commands to our <code>Program</code> instance to run.<p>See the <a href=cmd.html><code>Cmd</code></a> module for ways to construct, map and batch commands.<h3 id=subscriptions>Subscriptions<a href=#subscriptions aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h3><p>Most of the messages (changes in the state) will originate within your code, but some will come from the outside, for example from a timer or a websocket. These sources can be tapped into with subscriptions, defined as F# functions that can dispatch new messages as they happen.<p>See the <a href=docs/subscription.html>subscriptions example</a> for details.<h3 id=view>View<a href=#view aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h3><p>The core is independent of any particular technolgy, instead relying on a renderer library to implement <code>setState</code> in any way seen fit. In fact, an Elmish app can run entirely without a UI!<p>At the moment, there are two UI technologies for which rendering has been implemented: React and React Native.<p>For details please see <a href=https://elmish.github.io/react>elmish-react</a>.<h3 id=interacting-with-a-browser>Interacting with a browser<a href=#interacting-with-a-browser aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h3><p>Larger Elmish applications for the browser may benefit from advanced features like routing and explicit navigation control.<p>For information about these features please see <a href=https://elmish.github.io/browser>elmish-browser</a>.<h3 id=controlling-termination>Controlling termination<a href=#controlling-termination aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h3><p>Hot reloading requires the new version of the application loop to be started. To faciliate the interaction with libraries that implement this functionality the v4 elmish extends the abstractions with "termination". Use <code>withTermination</code> function to specify the predicate that can invaluate incoming messages and decide if the dispatch loop should stop processing the messages, as well as specify how to release the resources.<h3 id=observing-the-state-changes>Observing the state changes<a href=#observing-the-state-changes aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h3><p>Every message going through the dispatch loop can be traced, along with the current state of the app. Just augument the program instance with a trace function:<pre class="atom-one-light grvsc-container"data-index=1 data-language=fs><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk14>open</span><span class=mtk1> </span><span class=mtk9>Elmish</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>Program.mkProgram init update view</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Program.withConsoleTrace</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>|></span><span class=mtk1> Program.run</span></span></span></code></pre><p>And start seeing the state and messages as updates happen in the browser developer console.<p>For more advanced debugging capabilities please see <a href=https://elmish.github.io/debugger>elmish-debugger</a>.</div></div></div></div></div></div></div></div></section></div></div></div></div><script async="" src="/elmish/resources/nacara-standard-layouts/scripts/menu.js"></script><footer class="footer"><div class="is-size-5"><div class="sitemap"><div class="sitemap-section"><div class="sitemap-section-title">Project ressources</div><ul class="sitemap-section-list"><li><a href="https://github.com/elmish/elmish" class="icon-text sitemap-section-list-item"><span class="icon"><i class="fas fa-file-code"></i></span><span class="sitemap-section-list-item-text">Repository</span></a></li><li><a href="/elmish/release_notes.html" class="icon-text sitemap-section-list-item"><span class="icon"><i class="fas fa-list"></i></span><span class="sitemap-section-list-item-text">Release notes</span></a></li><li><a href="https://github.com/elmish/elmish/blob/v4.x/LICENSE.md" class="icon-text sitemap-section-list-item"><span class="icon"><i class="fas fa-id-card"></i></span><span class="sitemap-section-list-item-text">License</span></a></li></ul></div><div class="sitemap-section"><div class="sitemap-section-title">Elmish modules</div><ul class="sitemap-section-list"><li><a href="https://elmish.github.io/elmish/" class="icon-text sitemap-section-list-item"><span class="icon"><i class="fa fa-book"></i></span><span class="sitemap-section-list-item-text">Fable.Elmish</span></a></li><li><a href="https://elmish.github.io/browser/" class="icon-text sitemap-section-list-item"><span class="icon"><i class="fa fa-book"></i></span><span class="sitemap-section-list-item-text">Fable.Elmish.Browser</span></a></li><li><a href="https://elmish.github.io/urlParser/" class="icon-text sitemap-section-list-item"><span class="icon"><i class="fa fa-book"></i></span><span class="sitemap-section-list-item-text">Fable.Elmish.UrlParser</span></a></li><li><a href="https://elmish.github.io/debugger/" class="icon-text sitemap-section-list-item"><span class="icon"><i class="fa fa-book"></i></span><span class="sitemap-section-list-item-text">Fable.Elmish.Debugger</span></a></li><li><a href="https://elmish.github.io/react/" class="icon-text sitemap-section-list-item"><span class="icon"><i class="fa fa-book"></i></span><span class="sitemap-section-list-item-text">Fable.Elmish.React</span></a></li><li><a href="https://elmish.github.io/hmr/" class="icon-text sitemap-section-list-item"><span class="icon"><i class="fa fa-book"></i></span><span class="sitemap-section-list-item-text">Fable.Elmish.HMR</span></a></li></ul></div><div class="sitemap-section"><div class="sitemap-section-title">Other Links</div><ul class="sitemap-section-list"><li><a href="https://fable.io" class="icon-text sitemap-section-list-item"><span class="icon"><i class="faf faf-fable"></i></span><span class="sitemap-section-list-item-text">Fable</span></a></li><li><a href="https://gitter.im/fable-compiler/Fable" class="icon-text sitemap-section-list-item"><span class="icon"><i class="fab fa-gitter"></i></span><span class="sitemap-section-list-item-text">Fable Gitter</span></a></li><li><a href="https://fsharp.org/guides/slack/" class="icon-text sitemap-section-list-item"><span class="icon"><i class="fab fa-slack"></i></span><span class="sitemap-section-list-item-text">F# Slack</span></a></li><li><a href="https://fsharp.org/" class="icon-text sitemap-section-list-item"><span class="icon"><i class="faf faf-fsharp-org"></i></span><span class="sitemap-section-list-item-text">F# Software Foundation</span></a></li></ul></div></div><p class="has-text-centered">Built with <a class="is-underlined" href="https://mangelmaxime.github.io/Nacara/">Nacara</a></p><p class="has-text-centered mt-2">Copyright © 2021-<span id="copyright-end-year"></span> Elmish contributors.</p><script>
        const year = new Date().getFullYear();
        document.getElementById('copyright-end-year').innerHTML = year;
        </script></div></footer></body></html>